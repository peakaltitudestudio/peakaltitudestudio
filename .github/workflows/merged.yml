name: Delete Feature Branch After Merge

on:
  pull_request:
    types:
      - closed

jobs:
  delete-branch:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check PR status
        uses: actions/github-script@v4
        with:
          script: |
            const baseBranch = github.event.pull_request.base.ref;
            console.log("Base branch: " + baseBranch)
            # if (baseBranch === 'main' || baseBranch === 'dev') {
            #     echo "merged=false" >> $GITHUB_ENV
            # } else if (github.event.pull_request.merged) {
            #     echo "merged=true" >> $GITHUB_ENV
            # } else {
            #     echo "merged=false" >> $GITHUB_ENV
            # }
        # env:
        #   GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    #   - name: Delete Branch
    #     if: steps.pr.outputs.PR !== 'PR is merged into a protected branch'
    #     run: |
    #       git fetch --prune
    #       git push --delete origin ${{ github.event.pull_request.head.ref }}
    #     env:
    #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
